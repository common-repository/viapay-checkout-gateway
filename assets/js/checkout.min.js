Viapay = Reepay;
window.rp=new Viapay.ModalCheckout,jQuery(function(e){"use strict";if("undefined"==typeof wc_checkout_params)return!1;e(document).ajaxComplete(function(n,o,t){if(t.url===wc_checkout_params.checkout_url||t.url.indexOf("wc-ajax=complete_order")>-1){const n=o.responseText;try{const o=e.parseJSON(n);if(!o.hasOwnProperty("is_viapay_checkout"))return!1;wc_viapay.buildModalCheckout(o.viapay.id,o.accept_url,o.cancel_url)}catch(e){return!1}}}),e(document).ready(function(){if(window.location.hash.indexOf("#!viapay-pay")>-1){const e=document.location.hash.replace("#!viapay-pay",""),n=new URLSearchParams(e);let o=n.get("rid"),t=n.get("accept_url"),a=n.get("cancel_url");window.setTimeout(function(){wc_viapay.buildModalCheckout(o,t,a),history.pushState("",document.title,window.location.pathname)},1e3)}})}),wc_viapay={buildModalCheckout:function(e,n,o){"OVERLAY"===WC_Gateway_Viapay_Checkout.payment_type?window.rp.show(e):window.rp=new Viapay.WindowCheckout(e),window.rp.addEventHandler(Viapay.Event.Accept,function(e){console.log("Accept",e);let o=n;for(let n in e)o=wc_viapay.setUrlParameter(o,n,e[n]);window.location.href=o}),window.rp.addEventHandler(Viapay.Event.Cancel,function(e){console.log("Cancel",e),window.location.href=o}),window.rp.addEventHandler(Viapay.Event.Close,function(e){console.log("Close",e)}),window.rp.addEventHandler(Viapay.Event.Error,function(e){console.log("Error",e),window.location.href=o})},setUrlParameter:function(e,n,o){var t=e.split("?")[0],a="?"+e.split("?")[1],c=n+"="+o,r="?"+c;if(a){var l=new RegExp("([?&])"+n+"[^&]*"),i=new RegExp("([?&])"+n+"=[^&;]+[&;]?");r=null==o||""===o?(r=a.replace(i,"$1")).replace(/[&;]$/,""):null!==a.match(l)?a.replace(l,"$1"+c):a+"&"+c}return t+(r="?"===r?"":r)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrb3V0LmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsInJwIiwiUmVlcGF5IiwiTW9kYWxDaGVja291dCIsImpRdWVyeSIsIiQiLCJ3Y19jaGVja291dF9wYXJhbXMiLCJkb2N1bWVudCIsImFqYXhDb21wbGV0ZSIsImV2ZW50IiwieGhyIiwic2V0dGluZ3MiLCJ1cmwiLCJjaGVja291dF91cmwiLCJpbmRleE9mIiwiZGF0YSIsInJlc3BvbnNlVGV4dCIsInJlc3VsdCIsInBhcnNlSlNPTiIsImhhc093blByb3BlcnR5Iiwid2NfcmVlcGF5IiwiYnVpbGRNb2RhbENoZWNrb3V0IiwicmVlcGF5IiwiaWQiLCJhY2NlcHRfdXJsIiwiY2FuY2VsX3VybCIsImUiLCJyZWFkeSIsImxvY2F0aW9uIiwiaGFzaCIsInJlcGxhY2UiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJyaWQiLCJnZXQiLCJzZXRUaW1lb3V0IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInRpdGxlIiwicGF0aG5hbWUiLCJyZWVwYXlfaWQiLCJXQ19HYXRld2F5X1JlZXBheV9DaGVja291dCIsInBheW1lbnRfdHlwZSIsInNob3ciLCJXaW5kb3dDaGVja291dCIsImFkZEV2ZW50SGFuZGxlciIsIkV2ZW50IiwiQWNjZXB0IiwiY29uc29sZSIsImxvZyIsInJlZGlyZWN0X3VybCIsInByb3AiLCJzZXRVcmxQYXJhbWV0ZXIiLCJocmVmIiwiQ2FuY2VsIiwiQ2xvc2UiLCJFcnJvciIsImtleSIsInZhbHVlIiwiYmFzZVVybCIsInNwbGl0IiwidXJsUXVlcnlTdHJpbmciLCJuZXdQYXJhbSIsInVwZGF0ZVJlZ2V4IiwiUmVnRXhwIiwicmVtb3ZlUmVnZXgiLCJtYXRjaCJdLCJtYXBwaW5ncyI6IkFBSUFBLE9BQU9DLEdBQUssSUFBSUMsT0FBT0MsY0FFdkJDLE9BQVEsU0FBVUMsR0FDZCxhQUdBLEdBQW1DLG9CQUF2QkMsbUJBQ1IsT0FBTyxFQUdYRCxFQUFHRSxVQUFXQyxhQUFjLFNBQVdDLEVBQU9DLEVBQUtDLEdBQy9DLEdBQU9BLEVBQVNDLE1BQVFOLG1CQUFtQk8sY0FBb0JGLEVBQVNDLElBQUlFLFFBQVMsMkJBQThCLEVBQU0sQ0FDckgsTUFBTUMsRUFBT0wsRUFBSU0sYUFHakIsSUFDSSxNQUFNQyxFQUFTWixFQUFFYSxVQUFXSCxHQUc1QixJQUFPRSxFQUFPRSxlQUFnQixzQkFDMUIsT0FBTyxFQUdYQyxVQUFVQyxtQkFBb0JKLEVBQU9LLE9BQU9DLEdBQUlOLEVBQU9PLFdBQVlQLEVBQU9RLFlBQzVFLE1BQVFDLEdBQ04sT0FBTyxNQUtuQnJCLEVBQUdFLFVBQVdvQixNQUFNLFdBQ2hCLEdBQUszQixPQUFPNEIsU0FBU0MsS0FBS2YsUUFBUyxpQkFBb0IsRUFBSSxDQUN2RCxNQUFNRixFQUFNTCxTQUFTcUIsU0FBU0MsS0FBS0MsUUFBUyxlQUFlLElBQ3ZEQyxFQUFTLElBQUlDLGdCQUFpQnBCLEdBRWxDLElBQUlxQixFQUFNRixFQUFPRyxJQUFLLE9BQ2xCVixFQUFhTyxFQUFPRyxJQUFLLGNBQ3pCVCxFQUFhTSxFQUFPRyxJQUFLLGNBRTdCbEMsT0FBT21DLFdBQVksV0FDZmYsVUFBVUMsbUJBQW9CWSxFQUFLVCxFQUFZQyxHQUMvQ1csUUFBUUMsVUFBVyxHQUFJOUIsU0FBUytCLE1BQU90QyxPQUFPNEIsU0FBU1csV0FDeEQsVUFLZm5CLFVBQVksQ0FRUkMsbUJBQW9CLFNBQVdtQixFQUFXaEIsRUFBWUMsR0FDRCxZQUE1Q2dCLDJCQUEyQkMsYUFFNUIxQyxPQUFPQyxHQUFHMEMsS0FBTUgsR0FHaEJ4QyxPQUFPQyxHQUFLLElBQUlDLE9BQU8wQyxlQUFnQkosR0FHM0N4QyxPQUFPQyxHQUFHNEMsZ0JBQWlCM0MsT0FBTzRDLE1BQU1DLE9BQVEsU0FBVWhDLEdBQ3REaUMsUUFBUUMsSUFBSyxTQUFVbEMsR0FFdkIsSUFBSW1DLEVBQWUxQixFQUNuQixJQUFNLElBQUkyQixLQUFRcEMsRUFDZG1DLEVBQWU5QixVQUFVZ0MsZ0JBQWlCRixFQUFjQyxFQUFNcEMsRUFBS29DLElBR3ZFbkQsT0FBTzRCLFNBQVN5QixLQUFPSCxJQUczQmxELE9BQU9DLEdBQUc0QyxnQkFBaUIzQyxPQUFPNEMsTUFBTVEsT0FBUSxTQUFVdkMsR0FDdERpQyxRQUFRQyxJQUFLLFNBQVVsQyxHQUN2QmYsT0FBTzRCLFNBQVN5QixLQUFPNUIsSUFHM0J6QixPQUFPQyxHQUFHNEMsZ0JBQWlCM0MsT0FBTzRDLE1BQU1TLE1BQU8sU0FBVXhDLEdBQ3JEaUMsUUFBUUMsSUFBSyxRQUFTbEMsS0FHMUJmLE9BQU9DLEdBQUc0QyxnQkFBaUIzQyxPQUFPNEMsTUFBTVUsTUFBTyxTQUFVekMsR0FDckRpQyxRQUFRQyxJQUFLLFFBQVNsQyxHQUN0QmYsT0FBTzRCLFNBQVN5QixLQUFPNUIsS0FZL0IyQixnQkFBaUIsU0FBV3hDLEVBQUs2QyxFQUFLQyxHQUNsQyxJQUFJQyxFQUFVL0MsRUFBSWdELE1BQU0sS0FBSyxHQUN6QkMsRUFBaUIsSUFBTWpELEVBQUlnRCxNQUFNLEtBQUssR0FDdENFLEVBQVdMLEVBQU0sSUFBTUMsRUFDdkIzQixFQUFTLElBQU0rQixFQUduQixHQUFJRCxFQUFnQixDQUNoQixJQUFJRSxFQUFjLElBQUlDLE9BQU8sU0FBWVAsRUFBTSxTQUMzQ1EsRUFBYyxJQUFJRCxPQUFPLFNBQVlQLEVBQU0sZ0JBSTNDMUIsRUFGQSxNQUFPMkIsR0FBcUQsS0FBVkEsR0FDbEQzQixFQUFTOEIsRUFBZS9CLFFBQVFtQyxFQUFhLE9BQzdCbkMsUUFBUSxRQUFTLElBRVksT0FBdEMrQixFQUFlSyxNQUFNSCxHQUNuQkYsRUFBZS9CLFFBQVFpQyxFQUFhLEtBQU9ELEdBRzNDRCxFQUFpQixJQUFNQyxFQU94QyxPQUFPSCxHQUZQNUIsRUFBb0IsTUFBWEEsRUFBaUIsR0FBS0EiLCJmaWxlIjoiY2hlY2tvdXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHdjX2NoZWNrb3V0X3BhcmFtcyAqL1xuLyogZ2xvYmFsIFJlZXBheSAqL1xuXG4vLyBQcmVsb2FkIE1vZGFsQ2hlY2tvdXRcbndpbmRvdy5ycCA9IG5ldyBSZWVwYXkuTW9kYWxDaGVja291dCgpO1xuXG5qUXVlcnkoIGZ1bmN0aW9uKCAkICkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHdjX2NoZWNrb3V0X3BhcmFtcyBpcyByZXF1aXJlZCB0byBjb250aW51ZSwgZW5zdXJlIHRoZSBvYmplY3QgZXhpc3RzXG4gICAgaWYgKCB0eXBlb2Ygd2NfY2hlY2tvdXRfcGFyYW1zID09PSAndW5kZWZpbmVkJyApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgICQoIGRvY3VtZW50ICkuYWpheENvbXBsZXRlKCBmdW5jdGlvbiAoIGV2ZW50LCB4aHIsIHNldHRpbmdzICkge1xuICAgICAgICBpZiAoICggc2V0dGluZ3MudXJsID09PSB3Y19jaGVja291dF9wYXJhbXMuY2hlY2tvdXRfdXJsICkgfHwgKCBzZXR0aW5ncy51cmwuaW5kZXhPZiggJ3djLWFqYXg9Y29tcGxldGVfb3JkZXInICkgPiAtMSApICkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XG5cbiAgICAgICAgICAgIC8vIFBhcnNlXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9ICQucGFyc2VKU09OKCBkYXRhICk7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpcyByZXNwb25zZSBmcm9tIHBheW1lbnQgZ2F0ZXdheVxuICAgICAgICAgICAgICAgIGlmICggISByZXN1bHQuaGFzT3duUHJvcGVydHkoICdpc19yZWVwYXlfY2hlY2tvdXQnICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB3Y19yZWVwYXkuYnVpbGRNb2RhbENoZWNrb3V0KCByZXN1bHQucmVlcGF5LmlkLCByZXN1bHQuYWNjZXB0X3VybCwgcmVzdWx0LmNhbmNlbF91cmwgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gKTtcblxuICAgICQoIGRvY3VtZW50ICkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIHdpbmRvdy5sb2NhdGlvbi5oYXNoLmluZGV4T2YoICcjIXJlZXBheS1wYXknICkgPiAtMSApIHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGRvY3VtZW50LmxvY2F0aW9uLmhhc2gucmVwbGFjZSggJyMhcmVlcGF5LXBheScsJycgKSxcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCB1cmwgKTtcblxuICAgICAgICAgICAgbGV0IHJpZCA9IHBhcmFtcy5nZXQoICdyaWQnICksXG4gICAgICAgICAgICAgICAgYWNjZXB0X3VybCA9IHBhcmFtcy5nZXQoICdhY2NlcHRfdXJsJyApLFxuICAgICAgICAgICAgICAgIGNhbmNlbF91cmwgPSBwYXJhbXMuZ2V0KCAnY2FuY2VsX3VybCcgKTtcblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3Y19yZWVwYXkuYnVpbGRNb2RhbENoZWNrb3V0KCByaWQsIGFjY2VwdF91cmwsIGNhbmNlbF91cmwgKTtcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSggJycsIGRvY3VtZW50LnRpdGxlLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKTtcbiAgICAgICAgICAgIH0sIDEwMDAgKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbndjX3JlZXBheSA9IHtcbiAgICAvKipcbiAgICAgKiBCdWlsZCBNb2RhbCBDaGVja291dFxuICAgICAqXG4gICAgICogQHBhcmFtIHJlZXBheV9pZFxuICAgICAqIEBwYXJhbSBhY2NlcHRfdXJsXG4gICAgICogQHBhcmFtIGNhbmNlbF91cmxcbiAgICAgKi9cbiAgICBidWlsZE1vZGFsQ2hlY2tvdXQ6IGZ1bmN0aW9uICggcmVlcGF5X2lkLCBhY2NlcHRfdXJsLCBjYW5jZWxfdXJsICkge1xuICAgICAgICBpZiAoIFdDX0dhdGV3YXlfUmVlcGF5X0NoZWNrb3V0LnBheW1lbnRfdHlwZSA9PT0gJ09WRVJMQVknICkge1xuICAgICAgICAgICAgLy8gU2hvdyBtb2RhbFxuICAgICAgICAgICAgd2luZG93LnJwLnNob3coIHJlZXBheV9pZCApO1xuICAgICAgICAgICAgLy9ycCA9IG5ldyBSZWVwYXkuTW9kYWxDaGVja291dCggcmVlcGF5X2lkICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3cucnAgPSBuZXcgUmVlcGF5LldpbmRvd0NoZWNrb3V0KCByZWVwYXlfaWQgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5ycC5hZGRFdmVudEhhbmRsZXIoIFJlZXBheS5FdmVudC5BY2NlcHQsIGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdBY2NlcHQnLCBkYXRhICk7XG5cbiAgICAgICAgICAgIGxldCByZWRpcmVjdF91cmwgPSBhY2NlcHRfdXJsO1xuICAgICAgICAgICAgZm9yICggbGV0IHByb3AgaW4gZGF0YSApIHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmwgPSB3Y19yZWVwYXkuc2V0VXJsUGFyYW1ldGVyKCByZWRpcmVjdF91cmwsIHByb3AsIGRhdGFbcHJvcF0gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZWRpcmVjdF91cmw7XG4gICAgICAgIH0gKTtcblxuICAgICAgICB3aW5kb3cucnAuYWRkRXZlbnRIYW5kbGVyKCBSZWVwYXkuRXZlbnQuQ2FuY2VsLCBmdW5jdGlvbiggZGF0YSApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnQ2FuY2VsJywgZGF0YSApO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjYW5jZWxfdXJsO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgd2luZG93LnJwLmFkZEV2ZW50SGFuZGxlciggUmVlcGF5LkV2ZW50LkNsb3NlLCBmdW5jdGlvbiggZGF0YSApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnQ2xvc2UnLCBkYXRhICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICB3aW5kb3cucnAuYWRkRXZlbnRIYW5kbGVyKCBSZWVwYXkuRXZlbnQuRXJyb3IsIGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFcnJvcicsIGRhdGEgKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY2FuY2VsX3VybDtcbiAgICAgICAgfSApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBZGQgcGFyYW1ldGVyIGZvciBVcmxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHNldFVybFBhcmFtZXRlcjogZnVuY3Rpb24gKCB1cmwsIGtleSwgdmFsdWUgKSB7XG4gICAgICAgIHZhciBiYXNlVXJsID0gdXJsLnNwbGl0KCc/JylbMF0sXG4gICAgICAgICAgICB1cmxRdWVyeVN0cmluZyA9ICc/JyArIHVybC5zcGxpdCgnPycpWzFdLFxuICAgICAgICAgICAgbmV3UGFyYW0gPSBrZXkgKyAnPScgKyB2YWx1ZSxcbiAgICAgICAgICAgIHBhcmFtcyA9ICc/JyArIG5ld1BhcmFtO1xuXG4gICAgICAgIC8vIElmIHRoZSBcInNlYXJjaFwiIHN0cmluZyBleGlzdHMsIHRoZW4gYnVpbGQgcGFyYW1zIGZyb20gaXRcbiAgICAgICAgaWYgKHVybFF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlUmVnZXggPSBuZXcgUmVnRXhwKCcoW1xcPyZdKScgKyBrZXkgKyAnW14mXSonKTtcbiAgICAgICAgICAgIHZhciByZW1vdmVSZWdleCA9IG5ldyBSZWdFeHAoJyhbXFw/Jl0pJyArIGtleSArICc9W14mO10rWyY7XT8nKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7IC8vIFJlbW92ZSBwYXJhbSBpZiB2YWx1ZSBpcyBlbXB0eVxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nLnJlcGxhY2UocmVtb3ZlUmVnZXgsIFwiJDFcIik7XG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcGFyYW1zLnJlcGxhY2UoL1smO10kLywgXCJcIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXJsUXVlcnlTdHJpbmcubWF0Y2godXBkYXRlUmVnZXgpICE9PSBudWxsKSB7IC8vIElmIHBhcmFtIGV4aXN0cyBhbHJlYWR5LCB1cGRhdGUgaXRcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSB1cmxRdWVyeVN0cmluZy5yZXBsYWNlKHVwZGF0ZVJlZ2V4LCBcIiQxXCIgKyBuZXdQYXJhbSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIE90aGVyd2lzZSwgYWRkIGl0IHRvIGVuZCBvZiBxdWVyeSBzdHJpbmdcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSB1cmxRdWVyeVN0cmluZyArICcmJyArIG5ld1BhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gcGFyYW1ldGVyIHdhcyBzZXQgc28gd2UgZG9uJ3QgbmVlZCB0aGUgcXVlc3Rpb24gbWFya1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgPT09ICc/JyA/ICcnIDogcGFyYW1zO1xuXG4gICAgICAgIHJldHVybiBiYXNlVXJsICsgcGFyYW1zO1xuICAgIH1cbn07XG5cbiJdfQ==
